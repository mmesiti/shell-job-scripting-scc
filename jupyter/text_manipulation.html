

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Unix tools for manipulation, exploration and monitoring of text files &mdash; SCC/SCS Shell And Job Scripting  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx_lesson.css?v=e9df6548" />
      <link rel="stylesheet" type="text/css" href="../_static/term_role_formatting.css?v=4194e21c" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx_rtd_theme_ext_color_contrast.css?v=8e8ea19f" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
      <script src="../_static/minipres.js?v=a0d29692"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Instructor notes" href="../instructor_notes.html" />
    <link rel="prev" title="Tips and Tricks for interactive use" href="../bash/interactive_tips_and_tricks2.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            SCC/SCS Shell And Job Scripting
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Motivation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../motivation.html">Why should one learn the shell?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../motivation.html#advantages">Advantages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../motivation.html#limitations">Limitations</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Intermediate</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../general_best_practices.html">Job Scripting and best practices</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../general_best_practices.html#what-is-a-bash-script">What is a Bash script?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../general_best_practices.html#where-do-scripts-come-from">Where do scripts come from?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../general_best_practices.html#structure-of-a-bash-script-best-practices">Structure of a Bash script: best practices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../general_best_practices.html#adapt-it-to-for-use-with-sbatch">Adapt it to for use with sbatch</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../workflow-discussion_intermediate.html">Workflow discussion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bash/composability.html">Composability</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../bash/composability.html#streams-and-redirections">Streams and redirections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bash/composability.html#clarification-stdin-vs-command-line-arguments">Clarification: stdin vs command line arguments</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bash/composability.html#pipes">Pipes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bash/composability.html#variables">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bash/composability.html#yet-another-way-to-reuse-the-output-of-a-command">Yet another way to reuse the output of a command</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bash/dealing_with_repetition.html">Dealing with repetition</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../bash/dealing_with_repetition.html#iterating-on-multiple-files-directories-with-for-loops">Iterating on multiple files/directories with <code class="docutils literal notranslate"><span class="pre">for</span></code> loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bash/dealing_with_repetition.html#non-integer-parameter-scans-with-seq">Non integer parameter scans with <code class="docutils literal notranslate"><span class="pre">seq</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../embarrassingly_parallel.html">Simple Parallelism patterns in the shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../embarrassingly_parallel.html#tools-for-embarrassingly-parallel-workloads">Tools for embarrassingly Parallel Workloads</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../embarrassingly_parallel.html#parbatch">Parbatch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../embarrassingly_parallel.html#similar-projects">Similar Projects</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../slurm_arrays_and_workflows.html">SLURM Workflows</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../slurm_arrays_and_workflows.html#repeating-jobs-with-job-arrays">Repeating jobs with job arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="../slurm_arrays_and_workflows.html#workflow-managers">Workflow managers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bash/interactive_tips_and_tricks.html">Tips and Tricks for interactive use</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ssh/tips-and-tricks.html">SSH ergonomics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ssh/tips-and-tricks.html#the-ssh-config-file">The <code class="docutils literal notranslate"><span class="pre">.ssh/config</span></code> file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ssh/tips-and-tricks.html#ssh-keys">SSH keys</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ssh/tips-and-tricks.html#generating-a-ssh-keypair-and-registering-it">Generating a ssh keypair and registering it</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ssh/tips-and-tricks.html#ssh-agent"><code class="docutils literal notranslate"><span class="pre">ssh-agent</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../ssh/tips-and-tricks.html#security-on-hpc-is-important">Security on HPC is important!</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../job_examples.html">Examples of job scripts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../job_examples.html#dealing-with-walltime-limits-on-your-own-terms">Dealing with walltime limits on your own terms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../job_examples.html#job-chaining-using-recursive-sbatch">Job chaining using recursive <code class="docutils literal notranslate"><span class="pre">sbatch</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../job_examples.html#setting-dependencies-between-jobs-using-slurm">Setting dependencies between jobs using Slurm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../job_examples.html#an-excerpt-of-a-job-using-a-local-private-filesystem">An excerpt of a job using a local/private FileSystem</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bash/the_manual.html">Understanding the Bash manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="control_flow.html">Control flow in Bash: <code class="docutils literal notranslate"><span class="pre">if</span></code>, <code class="docutils literal notranslate"><span class="pre">while</span></code> and <code class="docutils literal notranslate"><span class="pre">trap</span></code>s</a><ul>
<li class="toctree-l2"><a class="reference internal" href="control_flow.html#control-flow-statements">Control flow statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="control_flow.html#if-else-statements"><code class="docutils literal notranslate"><span class="pre">if</span></code>-<code class="docutils literal notranslate"><span class="pre">else</span></code> statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="control_flow.html#and"><code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>, <code class="docutils literal notranslate"><span class="pre">||</span></code> and <code class="docutils literal notranslate"><span class="pre">!</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="control_flow.html#while-loops">While loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="control_flow.html#dealing-with-signals-traps">Dealing with signals: traps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="control_flow.html#when-is-a-trap-executed">When is a trap executed?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bash/composability2.html">More Bash features and their composability</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../bash/composability2.html#more-streams-and-redirections">More streams and redirections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bash/composability2.html#use-a-file-as-stdin-for-a-process">Use a file as <code class="docutils literal notranslate"><span class="pre">stdin</span></code> for  a process: <code class="docutils literal notranslate"><span class="pre">&lt;</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bash/composability2.html#stderr-into-stdout-or-vice-versa"><code class="docutils literal notranslate"><span class="pre">stderr</span></code> into <code class="docutils literal notranslate"><span class="pre">stdout</span></code> or vice versa</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bash/composability2.html#process-substitution">Process substitution: <code class="docutils literal notranslate"><span class="pre">&lt;()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bash/composability2.html#compound-commands">Compound commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bash/composability2.html#subshells-and-export">Subshells and <code class="docutils literal notranslate"><span class="pre">export</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../bash/composability2.html#bash-functions">Bash functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bash/composability2.html#arrays">Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bash/composability2.html#dealing-with-repetition-pipe-into-xargs-instead-of-for">Dealing with repetition: pipe into <code class="docutils literal notranslate"><span class="pre">xargs</span></code> instead of <code class="docutils literal notranslate"><span class="pre">for</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../defensive_programming.html">Defensive programming and debugging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../defensive_programming.html#debug-and-error-checking">Debug and error checking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../defensive_programming.html#fail-on-error-set-e">Fail on error: <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">-e</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../defensive_programming.html#error-when-using-an-undefined-variable-set-u">Error when using an undefined variable: <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">-u</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../defensive_programming.html#debugging-set-x">Debugging: <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">-x</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../defensive_programming.html#automatic-check-for-common-bad-practices-and-antipatterns">Automatic check for common bad practices and antipatterns</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bash/interactive_tips_and_tricks2.html">Tips and Tricks for interactive use</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../bash/interactive_tips_and_tricks2.html#multitasking-et-similia">Multitasking <em>et similia</em></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bash/interactive_tips_and_tricks2.html#using-multiple-applications-at-the-same-time">Using multiple applications at the same time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bash/interactive_tips_and_tricks2.html#alternative-tmux">Alternative: <code class="docutils literal notranslate"><span class="pre">tmux</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Unix tools for manipulation, exploration and monitoring of text files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#vertical-text-manipulation">“Vertical” text manipulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#horizontal-manipulations">Horizontal Manipulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#when-cut-does-not-cut-it-awk">When <code class="docutils literal notranslate"><span class="pre">cut</span></code> does not cut it: <code class="docutils literal notranslate"><span class="pre">awk</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#bulk-text-manipulation-with-sed">Bulk text manipulation with <code class="docutils literal notranslate"><span class="pre">sed</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#following-a-running-program">Following a running program</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-tee-command">The <code class="docutils literal notranslate"><span class="pre">tee</span></code> command</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-tail-f-command">The <code class="docutils literal notranslate"><span class="pre">tail</span> <span class="pre">-f</span></code> command</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Extra</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../instructor_notes.html">Instructor notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../instructor_notes.html#rationale">Rationale</a></li>
<li class="toctree-l2"><a class="reference internal" href="../instructor_notes.html#known-issues">Known issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../instructor_notes.html#schedule">Schedule</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SCC/SCS Shell And Job Scripting</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Unix tools for manipulation, exploration and monitoring of text files</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/mmesiti/shell-job-scripting-scc/blob/main/content/jupyter/text_manipulation.ipynb" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="unix-tools-for-manipulation-exploration-and-monitoring-of-text-files">
<h1>Unix tools for manipulation, exploration and monitoring of text files<a class="headerlink" href="#unix-tools-for-manipulation-exploration-and-monitoring-of-text-files" title="Link to this heading"></a></h1>
<p>This notebook contains a list of examples of common linux/unix commands.</p>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ol class="arabic simple">
<li><p>View and manipulate text and text files using fundamental Unix commands, selecting and joining rows and columns</p></li>
<li><p>Combine fundamental Unix commands</p></li>
<li><p>Inspect command output and output files with <code class="docutils literal notranslate"><span class="pre">tee</span></code> and <code class="docutils literal notranslate"><span class="pre">tail</span> <span class="pre">-f</span></code></p></li>
</ol>
</div>
<div class="admonition-weird-syntax-ahead admonition">
<p class="admonition-title">Weird syntax ahead</p>
<p>In order to reduce the need for temporary files to show the their effect,
<em>process substitution</em> (that is, the syntax <code class="docutils literal notranslate"><span class="pre">&lt;(</span> <span class="pre">*command*</span> <span class="pre">)</span></code>) and pipes (<code class="docutils literal notranslate"><span class="pre">|</span></code>) are used in the examples.
If this looks obscure,
the reader is invited to create the necessary temporary files.</p>
</div>
<div class="admonition-to-follow-along admonition">
<p class="admonition-title">To follow along</p>
<p>Please navigate to the <code class="docutils literal notranslate"><span class="pre">examples/text_manipulation</span></code>directory.</p>
</div>
<section id="vertical-text-manipulation">
<h2>“Vertical” text manipulation<a class="headerlink" href="#vertical-text-manipulation" title="Link to this heading"></a></h2>
<p>In this section, we have a look at commands
that cut and sew together files “vertically”.</p>
<p>We are going to use a Tab separated value file
as an example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>example.tsv
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>X	Y	Z	T
a1	a2	a3	a4
b1	b2	b3	b4
c1	c2	c3	c4
n	2	p	q
n	1	p	q
o	2	q	n
o	1	q	n
p	2	n	o
p	1	n	o
q	2	o	x
q	1	o	x
</pre></div>
</div>
</div>
</div>
<p>Tabs are characters that are nicely understood as column separators by many tools.
We slice it vertically using the <code class="docutils literal notranslate"><span class="pre">head</span></code> and <code class="docutils literal notranslate"><span class="pre">tail</span></code> commands.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">5</span><span class="w"> </span>example.tsv
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>X	Y	Z	T
a1	a2	a3	a4
b1	b2	b3	b4
c1	c2	c3	c4
n	2	p	q
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tail<span class="w"> </span>-n<span class="w"> </span><span class="m">4</span><span class="w"> </span>example.tsv
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>p	2	n	o
p	1	n	o
q	2	o	x
q	1	o	x
</pre></div>
</div>
</div>
</div>
<p>When a text file is large,
the <code class="docutils literal notranslate"><span class="pre">head</span></code> and <code class="docutils literal notranslate"><span class="pre">tail</span></code> commands are very useful
to get an idea of its content.
To explore files, <code class="docutils literal notranslate"><span class="pre">wc</span></code> is also useful</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wc<span class="w"> </span>example.tsv
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> 12  48 108 example.tsv
</pre></div>
</div>
</div>
</div>
<p>These number are, respectively, the number of lines/words/characters in <code class="docutils literal notranslate"><span class="pre">example.tsv</span></code>.</p>
<p>Multiple files can be joined together vertically
using the <code class="docutils literal notranslate"><span class="pre">cat</span></code> command:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>&lt;<span class="o">(</span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">5</span><span class="w"> </span>example.tsv<span class="o">)</span><span class="w"> </span>&lt;<span class="o">(</span>tail<span class="w"> </span>-n<span class="w"> </span>+6<span class="w"> </span>example.tsv<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>X	Y	Z	T
a1	a2	a3	a4
b1	b2	b3	b4
c1	c2	c3	c4
n	2	p	q
n	1	p	q
o	2	q	n
o	1	q	n
p	2	n	o
p	1	n	o
q	2	o	x
q	1	o	x
</pre></div>
</div>
</div>
</div>
<div class="admonition-break-and-concatenate exercise important admonition" id="exercise-0">
<p class="admonition-title">Break and concatenate</p>
<ol class="arabic">
<li><p>Verify, using the <code class="docutils literal notranslate"><span class="pre">diff</span></code> command,
that the output command above
reproduces the original <code class="docutils literal notranslate"><span class="pre">example.tsv</span></code>.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>You save the output to a temporary
file using <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>.</p>
</div>
</li>
<li><p>What if you change the head command to take only 4 lines instead of 5?</p></li>
<li><p>(Bonus points) Try again, but do not use temporary files.</p></li>
</ol>
<div class="admonition-solution solution important dropdown admonition" id="solution-0">
<p class="admonition-title">Solution</p>
<ol class="arabic">
<li><p>Using temporary files:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>&lt;<span class="o">(</span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">5</span><span class="w"> </span>example.tsv<span class="o">)</span><span class="w"> </span>&lt;<span class="o">(</span>tail<span class="w"> </span>-n<span class="w"> </span>+6<span class="w"> </span>example.tsv<span class="o">)</span><span class="w"> </span>&gt;<span class="w"> </span>reconstructed.tsv
diff<span class="w"> </span>example.tsv<span class="w"> </span>reconstructed.tsv
</pre></div>
</div>
<p>And there should be no output.</p>
</li>
<li><p>A possible solution,
in a single command,
without temporary files,
can be obtained by nesting
process substitution:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>diff<span class="w"> </span>&lt;<span class="o">(</span>cat<span class="w"> </span>&lt;<span class="o">(</span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">5</span><span class="w"> </span>example.tsv<span class="o">)</span><span class="w"> </span>&lt;<span class="o">(</span>tail<span class="w"> </span>-n<span class="w"> </span>+6<span class="w"> </span>example.tsv<span class="o">))</span><span class="w"> </span>example.tsv
</pre></div>
</div>
<p>And there should be no output.</p>
</li>
</ol>
</div>
</div>
<p>Another notable program that cuts files vertically is <code class="docutils literal notranslate"><span class="pre">grep</span></code>.
<code class="docutils literal notranslate"><span class="pre">grep</span></code> can also be used with <em>regular expressions</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;[acp][12]?&#39;</span><span class="w"> </span>example.tsv
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold -Color-Bold-Red">a1</span>	<span class=" -Color -Color-Bold -Color-Bold-Red">a2</span>	<span class=" -Color -Color-Bold -Color-Bold-Red">a</span>3	<span class=" -Color -Color-Bold -Color-Bold-Red">a</span>4
<span class=" -Color -Color-Bold -Color-Bold-Red">c1</span>	<span class=" -Color -Color-Bold -Color-Bold-Red">c2</span>	<span class=" -Color -Color-Bold -Color-Bold-Red">c</span>3	<span class=" -Color -Color-Bold -Color-Bold-Red">c</span>4
n	2	<span class=" -Color -Color-Bold -Color-Bold-Red">p</span>	q
n	1	<span class=" -Color -Color-Bold -Color-Bold-Red">p</span>	q
<span class=" -Color -Color-Bold -Color-Bold-Red">p</span>	2	n	o
<span class=" -Color -Color-Bold -Color-Bold-Red">p</span>	1	n	o
</pre></div>
</div>
</div>
</div>
<p><em>Regular expressions</em> are a very powerful tool to search, extract and replace text, implemented in many programming languages and supported by many tools in the shell.</p>
<p>Multiple <code class="docutils literal notranslate"><span class="pre">grep</span></code> commands can be combined with <em>pipes</em>, creating sophisticated filters:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;[acp][12]?&#39;</span><span class="w"> </span>example.tsv<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-v<span class="w"> </span><span class="s1">&#39;2&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>n	1	p	q
p	1	n	o
</pre></div>
</div>
</div>
</div>
<div class="admonition-view-and-search-command-history exercise important admonition" id="exercise-1">
<p class="admonition-title">View and search command history</p>
<ol class="arabic simple">
<li><p>How would you print the last 10 entries in your command history into a text file?</p></li>
<li><p>How many times have you used the <code class="docutils literal notranslate"><span class="pre">ls</span></code> command?</p></li>
</ol>
</div>
<p>Another kind of vertical manipulation is done with the <code class="docutils literal notranslate"><span class="pre">sort</span></code> command (in this case, according to the second column):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tail<span class="w"> </span>-n<span class="w"> </span><span class="m">8</span><span class="w"> </span>example.tsv<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-k2
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>p	1	n	o
q	1	o	x
n	1	p	q
o	1	q	n
p	2	n	o
q	2	o	x
n	2	p	q
o	2	q	n
</pre></div>
</div>
</div>
</div>
</section>
<section id="horizontal-manipulations">
<h2>Horizontal Manipulations<a class="headerlink" href="#horizontal-manipulations" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">cut</span></code> can extract columns from a file:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cut<span class="w"> </span>-f1,2<span class="w"> </span>example.tsv
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>X	Y
a1	a2
b1	b2
c1	c2
n	2
n	1
o	2
o	1
p	2
p	1
q	2
q	1
</pre></div>
</div>
</div>
</div>
<p>and <code class="docutils literal notranslate"><span class="pre">paste</span></code> can join columns together:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>paste<span class="w"> </span>&lt;<span class="o">(</span>cut<span class="w"> </span>-f1,2<span class="w"> </span>example.tsv<span class="o">)</span><span class="w"> </span>&lt;<span class="o">(</span>cut<span class="w"> </span>-f3,4<span class="w"> </span>example.tsv<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>X	Y	Z	T
a1	a2	a3	a4
b1	b2	b3	b4
c1	c2	c3	c4
n	2	p	q
n	1	p	q
o	2	q	n
o	1	q	n
p	2	n	o
p	1	n	o
q	2	o	x
q	1	o	x
</pre></div>
</div>
</div>
</div>
<div class="admonition-cut-and-paste exercise important admonition" id="exercise-2">
<p class="admonition-title">Cut and paste</p>
<ol class="arabic simple">
<li><p>Verify using the <code class="docutils literal notranslate"><span class="pre">diff</span></code> command that the output of the command above is equal to the original <code class="docutils literal notranslate"><span class="pre">example.tsv</span></code> file</p></li>
<li><p>What happens if you change the column choices in <code class="docutils literal notranslate"><span class="pre">cut</span></code>?</p></li>
</ol>
</div>
</section>
<section id="when-cut-does-not-cut-it-awk">
<h2>When <code class="docutils literal notranslate"><span class="pre">cut</span></code> does not cut it: <code class="docutils literal notranslate"><span class="pre">awk</span></code><a class="headerlink" href="#when-cut-does-not-cut-it-awk" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">cut</span></code> is a simple tool that works when the columns of a file have a one-character separator.</p>
<p>If this is not the case, one can resort to <code class="docutils literal notranslate"><span class="pre">awk</span></code>, which is a very powerful tool.</p>
<p>To print the first 2 columns of <code class="docutils literal notranslate"><span class="pre">example.tsv</span></code> with <code class="docutils literal notranslate"><span class="pre">awk</span></code>, we can use</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>awk<span class="w"> </span><span class="s1">&#39;{print $1,$2}&#39;</span><span class="w"> </span>example.tsv
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>X Y
a1 a2
b1 b2
c1 c2
n 2
n 1
o 2
o 1
p 2
p 1
q 2
q 1
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">awk</span></code> can also be used in a pipe, and do mathematical operations, if you need to do quick checks.</p>
</section>
<section id="bulk-text-manipulation-with-sed">
<h2>Bulk text manipulation with <code class="docutils literal notranslate"><span class="pre">sed</span></code><a class="headerlink" href="#bulk-text-manipulation-with-sed" title="Link to this heading"></a></h2>
<p>A command that can be used to manipulate general text
(not necessarily in tables) is <code class="docutils literal notranslate"><span class="pre">sed</span></code>.</p>
<p>The typical use case is “search and replace”:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sed<span class="w"> </span><span class="s1">&#39;s/p/PI/g&#39;</span><span class="w"> </span>example.tsv
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>X	Y	Z	T
a1	a2	a3	a4
b1	b2	b3	b4
c1	c2	c3	c4
n	2	PI	q
n	1	PI	q
o	2	q	n
o	1	q	n
PI	2	n	o
PI	1	n	o
q	2	o	x
q	1	o	x
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">sed</span></code> can also, instead of sending its output to <code class="docutils literal notranslate"><span class="pre">stdout</span></code>, do the modification in place, when using the <code class="docutils literal notranslate"><span class="pre">-i</span></code> option:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>example.tsv<span class="w"> </span>example_copy.tsv
sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s/p/PI/g&#39;</span><span class="w"> </span>example_copy.tsv
cat<span class="w"> </span>example_copy.tsv
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>X	Y	Z	T
a1	a2	a3	a4
b1	b2	b3	b4
c1	c2	c3	c4
n	2	PI	q
n	1	PI	q
o	2	q	n
o	1	q	n
PI	2	n	o
PI	1	n	o
q	2	o	x
q	1	o	x
</pre></div>
</div>
</div>
</div>
</section>
<section id="following-a-running-program">
<h2>Following a running program<a class="headerlink" href="#following-a-running-program" title="Link to this heading"></a></h2>
<p>If we have a process that is generating some output in a text file
and we want to monitor its output, we have two possibilities.</p>
<section id="the-tee-command">
<h3>The <code class="docutils literal notranslate"><span class="pre">tee</span></code> command<a class="headerlink" href="#the-tee-command" title="Link to this heading"></a></h3>
<p>If we just want to see the output of a process
and at the same time save it into a file, the <code class="docutils literal notranslate"><span class="pre">tee</span></code> command helps us to do that:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./generate.sh<span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>growing_file<span class="w"> </span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Generating line 1...
Generating line 2...
Generating line 3...
Generating line 4...
Generating line 5...
Generating line 6...
Generating line 7...
Generating line 8...
Generating line 9...
Generating line 10...
Done.
</pre></div>
</div>
</div>
</div>
</section>
<section id="the-tail-f-command">
<h3>The <code class="docutils literal notranslate"><span class="pre">tail</span> <span class="pre">-f</span></code> command<a class="headerlink" href="#the-tail-f-command" title="Link to this heading"></a></h3>
<p>Alternatively, we can use <code class="docutils literal notranslate"><span class="pre">tail</span> <span class="pre">-f</span></code> (<code class="docutils literal notranslate"><span class="pre">-f</span></code> stands for follow).
Example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./generate.sh<span class="w"> </span>&gt;<span class="w"> </span>growing_file<span class="w"> </span><span class="p">&amp;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] 29003
</pre></div>
</div>
</div>
</div>
<p>This command is generating lines of text and adding them one by one to <code class="docutils literal notranslate"><span class="pre">growing_file</span></code>.
To monitor the process, we can do</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tail<span class="w"> </span>-f<span class="w"> </span>-s<span class="w"> </span><span class="m">5</span><span class="w"> </span>growing_file
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Generating line 1...
Generating line 2...
Generating line 3...
Generating line 4...
Generating line 5...
Generating line 6...
Generating line 7...
Generating line 8...
Generating line 9...
Generating line 10...
Done.
</pre></div>
</div>
</div>
</div>
<p>And terminate with <code class="docutils literal notranslate"><span class="pre">CTRL+C</span></code> when we so decide.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">tail</span> <span class="pre">-f</span></code> can be nasty to other users!</p>
<p>When used to monitor files in a global filesystem (e.g., you home directory) the frequent <em>polling</em> by <code class="docutils literal notranslate"><span class="pre">tail</span> <span class="pre">-f</span></code> might strain the filesystem unnecessarily.
By adding the option <code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">10</span></code>, for example, we reduce the load by telling <code class="docutils literal notranslate"><span class="pre">tail</span></code> to check less frequently - in this case every 10 seconds.</p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../bash/interactive_tips_and_tricks2.html" class="btn btn-neutral float-left" title="Tips and Tricks for interactive use" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../instructor_notes.html" class="btn btn-neutral float-right" title="Instructor notes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>